{
  "milestones": [
    {"title": "M0 – Foundation", "description": "Scaffold, basic API, CI smoke"},
    {"title": "M1 – Domain Models", "description": "Models, validation, migrations"},
    {"title": "M2 – Workflows & RBAC", "description": "State machine + authorization"},
    {"title": "M3 – Document Handling", "description": "Upload, PDF publish, archiving"},
    {"title": "M4 – Search & Reporting", "description": "Indexing, filters, KPIs"},
    {"title": "M5 – Notifications & SSO", "description": "Email alerts, Microsoft 365 SSO"},
    {"title": "M6 – Hardening & Release", "description": "Security, perf, runbooks"}
  ],
  "issues": [
    {
      "title": "Scaffold repository and Makefile",
      "body": "Initialize repo structure, Makefile targets (setup/run/test/lint/format/build), and starter modules per AGENTS.md.",
      "labels": ["task", "M0"],
      "milestone": "M0 – Foundation"
    },
    {
      "title": "Basic API: /health and /validate endpoints",
      "body": "Expose health check and document ID validation using default regex; add root index page.",
      "labels": ["enhancement", "M0"],
      "milestone": "M0 – Foundation"
    },
    {
      "title": "Set up CI with lint and tests",
      "body": "Add GitHub Actions for Python lint (Ruff/Black) and pytest; ensure green on main.",
      "labels": ["task", "ci", "M0"],
      "milestone": "M0 – Foundation"
    },

    {"title": "Select database (Postgres) and doc storage (S3-compatible)", "body": "Decide DB and file storage; document tradeoffs.", "labels": ["database", "M1"], "milestone": "M1 – Domain Models"},
    {"title": "Define ERD and migration plan", "body": "Design tables: documents, audit_logs, code_lists, users/roles; versioning fields.", "labels": ["database", "design", "M1"], "milestone": "M1 – Domain Models"},
    {"title": "Implement migrations and runner", "body": "Add migrations/ directory and CLI; create initial schema.", "labels": ["database", "task", "M1"], "milestone": "M1 – Domain Models"},
    {"title": "Unique constraints and indexes", "body": "Enforce unique document ID; indexes for search filters.", "labels": ["database", "M1"], "milestone": "M1 – Domain Models"},
    {"title": "Domain models: Document", "body": "Fields, invariants, factory methods; version semantics.", "labels": ["enhancement", "M1"], "milestone": "M1 – Domain Models"},
    {"title": "Domain models: AuditLog (append-only)", "body": "Append-only design; helpers for writing events.", "labels": ["enhancement", "M1"], "milestone": "M1 – Domain Models"},
    {"title": "Domain models: CodeList CRUD", "body": "Company, Subsidiary, Department, Type code lists.", "labels": ["enhancement", "M1"], "milestone": "M1 – Domain Models"},
    {"title": "Validation library", "body": "Regex for IDs, mandatory metadata, DTO schemas.", "labels": ["test", "M1"], "milestone": "M1 – Domain Models"},
    {"title": "Seed data for dev", "body": "Seed code lists and a few documents for local testing.", "labels": ["task", "M1"], "milestone": "M1 – Domain Models"},

    {"title": "Define workflow state machine", "body": "States, transitions, guards; major/minor revision rules.", "labels": ["enhancement", "M2"], "milestone": "M2 – Workflows & RBAC"},
    {"title": "Implement workflow engine", "body": "Functions for transitions; record to audit logs.", "labels": ["enhancement", "M2"], "milestone": "M2 – Workflows & RBAC"},
    {"title": "RBAC role definitions and matrix", "body": "End User, Owner, Controller, Admin, QMS; permission map.", "labels": ["security", "design", "M2"], "milestone": "M2 – Workflows & RBAC"},
    {"title": "Auth middleware & guards", "body": "Enforce RBAC per endpoint; deny by default.", "labels": ["security", "M2"], "milestone": "M2 – Workflows & RBAC"},
    {"title": "Workflow endpoints", "body": "submit, approve, reject, archive; version bump.", "labels": ["enhancement", "api", "M2"], "milestone": "M2 – Workflows & RBAC"},
    {"title": "Authorization unit tests", "body": "Test role gates and negative paths.", "labels": ["test", "M2"], "milestone": "M2 – Workflows & RBAC"},

    {"title": "File storage adapters", "body": "Local (dev) and S3-compatible (prod) implementations.", "labels": ["files", "M3"], "milestone": "M3 – Document Handling"},
    {"title": "Upload API (multipart)", "body": "Validate size/type; compute checksum; virus-scan stub.", "labels": ["api", "files", "M3"], "milestone": "M3 – Document Handling"},
    {"title": "Publish PDF pipeline", "body": "Convert to PDF and store in public area; set ACLs.", "labels": ["files", "M3"], "milestone": "M3 – Document Handling"},
    {"title": "Restrict source access", "body": "Signed URLs / private bucket; enforce RBAC.", "labels": ["security", "files", "M3"], "milestone": "M3 – Document Handling"},
    {"title": "Versioning rules and latest pointer", "body": "Major/minor increments; mark latest; block obsolete.", "labels": ["enhancement", "M3"], "milestone": "M3 – Document Handling"},
    {"title": "Auto-archive obsolete versions", "body": "Move prior versions to archive on approval.", "labels": ["enhancement", "M3"], "milestone": "M3 – Document Handling"},

    {"title": "Choose search approach", "body": "DB FTS or external engine; document choice.", "labels": ["search", "design", "M4"], "milestone": "M4 – Search & Reporting"},
    {"title": "Build search index", "body": "Index metadata/keywords; update on changes.", "labels": ["search", "M4"], "milestone": "M4 – Search & Reporting"},
    {"title": "Search API (filters + pagination)", "body": "Company, Subsidiary, Department, Type, Status; sort.", "labels": ["search", "api", "M4"], "milestone": "M4 – Search & Reporting"},
    {"title": "Performance harness for search", "body": "Seed dataset and benchmark P95 < 2s.", "labels": ["performance", "M4"], "milestone": "M4 – Search & Reporting"},
    {"title": "KPIs & reports endpoints", "body": "Pending reviews, overdue revisions; export PDF/Excel.", "labels": ["reporting", "M4"], "milestone": "M4 – Search & Reporting"},
    {"title": "Cache layer for queries", "body": "Basic caching and invalidation strategy.", "labels": ["performance", "M4"], "milestone": "M4 – Search & Reporting"},

    {"title": "SMTP configuration and templates", "body": "Set up email transport; template partials and themes.", "labels": ["notifications", "M5"], "milestone": "M5 – Notifications & SSO"},
    {"title": "Review reminder scheduler", "body": "Periodic reminders for pending reviews/overdue items.", "labels": ["notifications", "M5"], "milestone": "M5 – Notifications & SSO"},
    {"title": "Approval/expiry notifications", "body": "Email on approvals and upcoming expiries; throttle.", "labels": ["notifications", "M5"], "milestone": "M5 – Notifications & SSO"},
    {"title": "Microsoft 365 SSO integration", "body": "OIDC flow; map groups/claims to roles; docs.", "labels": ["security", "sso", "M5"], "milestone": "M5 – Notifications & SSO"},
    {"title": "Login/logout endpoints & session mgmt", "body": "Implement auth routes and session security.", "labels": ["security", "M5"], "milestone": "M5 – Notifications & SSO"},

    {"title": "API input validation & error model", "body": "Centralize validation and consistent error responses.", "labels": ["security", "M6"], "milestone": "M6 – Hardening & Release"},
    {"title": "Security headers and CORS", "body": "Harden responses and set proper CORS policy.", "labels": ["security", "M6"], "milestone": "M6 – Hardening & Release"},
    {"title": "Rate limiting & basic abuse protections", "body": "Protect sensitive endpoints and avoid abuse.", "labels": ["security", "performance", "M6"], "milestone": "M6 – Hardening & Release"},
    {"title": "Structured logging and correlation IDs", "body": "Add request IDs and structured logs.", "labels": ["ops", "M6"], "milestone": "M6 – Hardening & Release"},
    {"title": "Metrics & dashboards", "body": "Latency, error rates, workflow durations, indexing times.", "labels": ["ops", "performance", "M6"], "milestone": "M6 – Hardening & Release"},
    {"title": "Alerts for SLOs", "body": "Configure alerting for critical SLO breaches.", "labels": ["ops", "M6"], "milestone": "M6 – Hardening & Release"},
    {"title": "Backups and restore runbook", "body": "Automate backups and document restore process.", "labels": ["ops", "M6"], "milestone": "M6 – Hardening & Release"},
    {"title": "Load test and tuning", "body": "Benchmark and optimize bottlenecks to hit SLAs.", "labels": ["performance", "M6"], "milestone": "M6 – Hardening & Release"}

    ,
    {"title": "Frontend: init Vue + Tailwind app", "body": "Scaffold frontend project and CI.", "labels": ["frontend", "M1"], "milestone": "M1 – Domain Models"},
    {"title": "Frontend: auth and route guards", "body": "Integrate auth and protect routes per role.", "labels": ["frontend", "security", "M2"], "milestone": "M2 – Workflows & RBAC"},
    {"title": "Frontend: dashboards per role", "body": "Role-based widgets (controllers, QMS, end users).", "labels": ["frontend", "M4"], "milestone": "M4 – Search & Reporting"},
    {"title": "Frontend: search page with filters", "body": "Query, filters, pagination, empty states.", "labels": ["frontend", "search", "M4"], "milestone": "M4 – Search & Reporting"},
    {"title": "Frontend: upload form with autosuggest", "body": "Validate ID/metadata; autosuggest codes.", "labels": ["frontend", "files", "M3"], "milestone": "M3 – Document Handling"},
    {"title": "Frontend: document view", "body": "Embedded PDF, metadata, version history.", "labels": ["frontend", "M3"], "milestone": "M3 – Document Handling"},
    {"title": "Frontend: review queue", "body": "Approve/reject UI with comments.", "labels": ["frontend", "M2"], "milestone": "M2 – Workflows & RBAC"},
    {"title": "Frontend: reports UI", "body": "KPIs list and export actions.", "labels": ["frontend", "reporting", "M4"], "milestone": "M4 – Search & Reporting"},

    {"title": "API docs (OpenAPI)", "body": "Generate and publish OpenAPI spec; include examples.", "labels": ["docs", "api", "M2"], "milestone": "M2 – Workflows & RBAC"},
    {"title": "Admin documentation", "body": "RBAC roles, code lists management, backups, and restore.", "labels": ["docs", "M6"], "milestone": "M6 – Hardening & Release"},
    {"title": "User guide", "body": "Search, view, upload, review workflows.", "labels": ["docs", "M3"], "milestone": "M3 – Document Handling"},
    {"title": "Security policy and threat model", "body": "Document threats and mitigations; update periodically.", "labels": ["security", "docs", "M6"], "milestone": "M6 – Hardening & Release"},
    {"title": "Dockerize backend and frontend", "body": "Dockerfiles, docker-compose for dev and CI.", "labels": ["ops", "M0"], "milestone": "M0 – Foundation"},
    {"title": "Integration tests with DB and storage", "body": "CI job using services for Postgres and MinIO.", "labels": ["test", "ci", "M3"], "milestone": "M3 – Document Handling"},
    {"title": "Coverage reports and badge", "body": "Upload coverage to artifact; add badge to README.", "labels": ["ci", "test", "M0"], "milestone": "M0 – Foundation"}
  ]
}
